!function(e){var t={};function o(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(r,l,function(t){return e[t]}.bind(null,l));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const r=document.querySelector(".drawing-area__canvas"),l={setSize:e=>{localStorage.setItem("size",e)},getSize:()=>null===localStorage.getItem("size")?(l.setSize(128),128):localStorage.getItem("size"),setPrevColor:e=>{localStorage.setItem("previous color",e)},getPrevColor:()=>null===localStorage.getItem("previous color")?(l.setPrevColor("#c4c4c4"),"#c4c4c4"):localStorage.getItem("previous color"),setCurColor:e=>{localStorage.setItem("current color",e)},getCurColor:()=>null===localStorage.getItem("current color")?(l.setCurColor("#41f795"),"#41f795"):localStorage.getItem("current color"),setImage:()=>{localStorage.setItem("canvasImage",r.toDataURL())},getImage:()=>null!==localStorage.getItem("canvasImage")?localStorage.getItem("canvasImage"):"",setActiveTool:e=>{localStorage.setItem("active tool",e)},getActiveTool:()=>null===localStorage.getItem("active tool")?(l.setActiveTool("pencil"),"pencil"):localStorage.getItem("active tool")};var c=l;const a=document.querySelector(".drawing-area__canvas"),n=document.querySelector(".prev-color"),s=document.querySelector(".colors__color-picker");a.width=512,a.height=512;const u=a.getContext("2d"),i={prevColor:c.getPrevColor(),currColor:c.getCurColor(),size:c.getSize(),activeTool:c.getActiveTool(),setSize:e=>{i.size=e,c.setSize(i.size)},clearCanvas:()=>{u.clearRect(0,0,a.width,a.height)},setCurrentColor:e=>{i.prevColor=i.currColor,i.currColor=e,c.setPrevColor(i.prevColor),c.setCurColor(i.currColor),s.value=i.currColor,n.style.backgroundColor=i.prevColor},setActiveTool:e=>{i.activeTool=e,c.setActiveTool(e)}};var v=i;const d=document.querySelector(".drawing-area__slider-value"),g=document.querySelector(".drawing-area__slider");var m=function(){const e=g.value;c.setSize(e),v.size=e;const t=(g.value-g.getAttribute("min"))/(g.getAttribute("max")-g.getAttribute("min"));let o;switch(e){case"128":o=7;break;case"256":o=-7;break;case"384":o=-21;break;case"512":o=-35}d.innerHTML=e,d.style.left=`${512*t+o}px`};const p=document.querySelector(".drawing-area__canvas");p.width=512,p.height=512;const f=p.getContext("2d"),C=document.querySelectorAll(".tools__tool");let S=!1;function y(e){if(S){const t=Math.round(p.width/v.size),o=e.target.getBoundingClientRect(),r=Math.floor((e.clientX-o.left)/t),l=Math.floor((e.clientY-o.top)/t);f.fillStyle=v.currColor,f.fillRect(r*t,l*t,t,t)}}function b(e,t){switch(p.style.cursor="url(../assets/pencil.svg), auto",t){case"mousemove":y(e);break;case"mousedown":S=!0,y(e);break;case"mouseup":case"mouseout":S=!1,c.setImage()}}const _=e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t},h=(e,t,o)=>{return`#${_(e)}${_(t)}${_(o)}`};function k(e){p.style.cursor="url(../assets/color-picker.svg), auto",function(e){const t=e.target.getBoundingClientRect(),o=e.clientX-t.left,r=e.clientY-t.top,l=f.getImageData(o,r,1,1);v.setCurrentColor(h(l.data[0],l.data[1],l.data[2]))}(e)}const w=document.querySelector(".drawing-area__slider"),I=document.querySelector(".drawing-area__canvas"),T=I.getContext("2d"),z=document.querySelector(".prev-color"),L=document.querySelector(".colors__color-picker"),A=document.querySelectorAll(".colors__color"),q=document.querySelectorAll(".tools__tool");w.onchange=()=>m(),window.onload=()=>{L.value=v.currColor,z.style.backgroundColor=v.prevColor,w.value=v.size,m(),q[function(e){switch(e){case"paint-bucket":return 0;case"color-picker":return 1;case"pencil":return 2}return-1}(v.activeTool)].classList.add("active-tool");const e=new Image;e.src=c.getImage(),null!==e.src&&(e.onload=()=>{T.drawImage(e,0,0)})},window.onbeforeunload=()=>{c.setImage(I.toDataURL())},L.onchange=()=>{v.setCurrentColor(L.value)},A.forEach((e,t)=>{e.addEventListener("click",()=>{switch(t){case 1:v.setCurrentColor(v.prevColor);break;case 2:v.setCurrentColor("#f74141");break;case 3:v.setCurrentColor("#00BCD4")}})}),q.forEach((e,t)=>{e.addEventListener("click",function(e){switch(C.forEach(e=>e.classList.remove("active-tool")),e){case 0:v.setActiveTool("paint-bucket"),p.addEventListener("mousemove",()=>{p.style.cursor="url(../assets/paint-bucket.svg), auto"},!1);break;case 1:v.setActiveTool("color-picker"),p.addEventListener("mousemove",()=>{p.style.cursor="url(../assets/color-picker.svg), auto"},!1);break;case 2:v.setActiveTool("pencil"),p.addEventListener("mousemove",()=>{p.style.cursor="url(../assets/pencil.svg), auto"},!1)}}(t),!1),e.classList.add("active-tool")}),I.addEventListener("mousemove",e=>{"pencil"===v.activeTool&&b(e,"mousemove")},!1),I.addEventListener("mousedown",e=>{"pencil"===v.activeTool&&b(e,"mousedown")},!1),I.addEventListener("mouseup",e=>{"pencil"===v.activeTool&&b(e,"mouseup")},!1),I.addEventListener("mouseout",e=>{"pencil"===v.activeTool&&b(e,"mouseout")},!1),I.addEventListener("click",e=>{"paint-bucket"===v.activeTool?"paint-bucket"===v.activeTool&&(p.style.cursor="url(../assets/paint-bucket.svg), auto",f.fillStyle=v.currColor,f.fillRect(0,0,p.width,p.height)):"color-picker"===v.activeTool&&k(e)},!1)}]);